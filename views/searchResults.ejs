<% layout("layouts/boilerplate") %>

<body>
  <div
    style="
      width: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
    "
  >
    <a class="go-back-btn" href="/listings">
      <i class="fa-solid fa-angle-left"></i>&nbsp;
      <span>go back to home</span>
    </a>
  </div>
  <br>
  <div class="alert alert-success alert-dismissible fade show" role="alert" style="width: 100%; text-align: center;">
    <div>Showing results for "<%= q %>"</div>
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
  </div>
  <div class="all-listings-wrapper">
    <% if (filteredListings && filteredListings.length) { %>
      <% for(let listing of filteredListings) { %>
        <a href="/listings/<%= listing._id %>">
          <div class="card" style="width: min-content; border: none">
            <img src="<%= listing.image.url %>" class="card-img-top" alt="listing image" />
            <div class="card-body">
              <h6 class="card-title"><%= listing.title %></h6>
              <div style="display: flex; flex-direction: column">
                <p>&#8377; <%= listing.price %>/night</p>
                <p><%= listing.location %>, <%= listing.country %></p>
              </div>
            </div>
          </div>
        </a>
        <% } %>
    <% } if(filteredListings.length === 0) { %>
      <h5 style="margin-top: 1rem;">No such listing found!</h5>
      <% } %>
  </div>
</body>
